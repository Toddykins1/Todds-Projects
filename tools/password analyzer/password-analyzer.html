<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Password Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            font-weight: 300;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .password-input-container {
            position: relative;
            margin-bottom: 20px;
        }

        .password-input {
            width: 100%;
            padding: 15px 50px 15px 15px;
            border: 2px solid #ddd;
            border-radius: 12px;
            font-size: 1.1em;
            font-family: 'Courier New', monospace;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .password-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .toggle-visibility {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            color: #666;
            transition: color 0.3s ease;
        }

        .toggle-visibility:hover {
            color: #333;
        }

        .strength-meter {
            margin-bottom: 20px;
        }

        .strength-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .strength-text {
            font-weight: 600;
            font-size: 1.1em;
        }

        .strength-score {
            font-size: 0.9em;
            color: #666;
        }

        .meter-bar {
            height: 12px;
            background: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .meter-fill {
            height: 100%;
            border-radius: 6px;
            transition: all 0.5s ease;
            position: relative;
        }

        .meter-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .analysis-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .analysis-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }

        .card-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-icon {
            font-size: 1.2em;
        }

        .checklist {
            list-style: none;
        }

        .checklist li {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .check-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            font-weight: bold;
        }

        .check-icon.pass {
            background: #28a745;
            color: white;
        }

        .check-icon.fail {
            background: #dc3545;
            color: white;
        }

        .check-icon.warning {
            background: #ffc107;
            color: #333;
        }

        .recommendations {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .recommendations h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recommendation-list {
            list-style: none;
        }

        .recommendation-list li {
            background: white;
            margin-bottom: 10px;
            padding: 12px 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .btn.secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        }

        .btn.success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(0);
        }

        .time-to-crack {
            text-align: center;
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
            margin-top: 15px;
        }

        .crack-time {
            font-size: 1.3em;
            color: #dc3545;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .analysis-grid {
                grid-template-columns: 1fr;
            }
            
            .actions {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîí Smart Password Analyzer</h1>
        
        <div class="input-section">
            <div class="password-input-container">
                <input type="password" id="passwordInput" class="password-input" placeholder="Enter your password to analyze...">
                <button class="toggle-visibility" onclick="toggleVisibility()">üëÅÔ∏è</button>
            </div>
            
            <div class="strength-meter">
                <div class="strength-label">
                    <span class="strength-text" id="strengthText">Enter a password</span>
                    <span class="strength-score" id="strengthScore">0/100</span>
                </div>
                <div class="meter-bar">
                    <div class="meter-fill" id="meterFill" style="width: 0%; background: #e9ecef;"></div>
                </div>
            </div>
        </div>

        <div class="analysis-grid">
            <div class="analysis-card">
                <div class="card-title">
                    <span class="card-icon">üìè</span>
                    Length Analysis
                </div>
                <ul class="checklist" id="lengthChecks">
                    <!-- Length checks will be populated here -->
                </ul>
            </div>

            <div class="analysis-card">
                <div class="card-title">
                    <span class="card-icon">üî§</span>
                    Character Variety
                </div>
                <ul class="checklist" id="characterChecks">
                    <!-- Character checks will be populated here -->
                </ul>
            </div>

            <div class="analysis-card">
                <div class="card-title">
                    <span class="card-icon">üõ°Ô∏è</span>
                    Security Features
                </div>
                <ul class="checklist" id="securityChecks">
                    <!-- Security checks will be populated here -->
                </ul>
            </div>

            <div class="analysis-card">
                <div class="card-title">
                    <span class="card-icon">‚ö†Ô∏è</span>
                    Common Issues
                </div>
                <ul class="checklist" id="issueChecks">
                    <!-- Issue checks will be populated here -->
                </ul>
            </div>
        </div>

        <div class="recommendations" id="recommendations" style="display: none;">
            <h3>
                <span>üí°</span>
                Recommendations
            </h3>
            <ul class="recommendation-list" id="recommendationList">
                <!-- Recommendations will be populated here -->
            </ul>
        </div>

        <div class="time-to-crack" id="crackTime" style="display: none;">
            <div>Estimated time to crack:</div>
            <div class="crack-time" id="crackTimeValue">--</div>
        </div>

        <div class="actions">
            <button class="btn" onclick="generateStrongPassword()">üé≤ Generate Strong Password</button>
            <button class="btn secondary" onclick="copyPassword()">üìã Copy Password</button>
            <button class="btn success" onclick="clearAnalysis()">üóëÔ∏è Clear</button>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <!-- Universal Back Button -->
    <script src="../../back-button.js"></script>
    
    <script>
        class PasswordAnalyzer {
            constructor() {
                this.passwordInput = document.getElementById('passwordInput');
                this.strengthText = document.getElementById('strengthText');
                this.strengthScore = document.getElementById('strengthScore');
                this.meterFill = document.getElementById('meterFill');
                this.recommendations = document.getElementById('recommendations');
                this.recommendationList = document.getElementById('recommendationList');
                this.crackTime = document.getElementById('crackTime');
                this.crackTimeValue = document.getElementById('crackTimeValue');
                this.toast = document.getElementById('toast');
                
                this.commonPasswords = [
                    'password', '123456', '123456789', 'qwerty', 'abc123', 'password123',
                    'admin', 'letmein', 'welcome', 'monkey', '1234567890', 'password1',
                    'qwerty123', 'dragon', 'master', 'hello', 'freedom', 'whatever',
                    'qazwsx', 'trustno1', '654321', 'jordan23', 'harley', 'password1',
                    '1234', 'robert', 'matthew', 'jordan', 'asshole', 'daniel'
                ];
                
                this.init();
            }

            init() {
                this.passwordInput.addEventListener('input', () => this.analyzePassword());
                this.analyzePassword(); // Initial analysis
            }

            analyzePassword() {
                const password = this.passwordInput.value;
                
                if (!password) {
                    this.resetAnalysis();
                    return;
                }
                
                const analysis = this.performAnalysis(password);
                this.updateStrengthMeter(analysis);
                this.updateChecks(analysis);
                this.updateRecommendations(analysis);
                this.updateCrackTime(analysis);
            }

            performAnalysis(password) {
                const analysis = {
                    length: password.length,
                    hasUppercase: /[A-Z]/.test(password),
                    hasLowercase: /[a-z]/.test(password),
                    hasNumbers: /\d/.test(password),
                    hasSymbols: /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password),
                    hasSpaces: /\s/.test(password),
                    isCommon: this.commonPasswords.includes(password.toLowerCase()),
                    hasRepeatingChars: /(.)\1{2,}/.test(password),
                    hasSequentialChars: this.hasSequentialChars(password),
                    hasKeyboardPatterns: this.hasKeyboardPatterns(password),
                    score: 0,
                    recommendations: []
                };

                // Calculate score
                analysis.score = this.calculateScore(analysis);
                
                return analysis;
            }

            calculateScore(analysis) {
                let score = 0;
                
                // Length scoring (0-40 points)
                if (analysis.length >= 12) score += 40;
                else if (analysis.length >= 8) score += 30;
                else if (analysis.length >= 6) score += 20;
                else if (analysis.length >= 4) score += 10;
                
                // Character variety (0-40 points)
                let varietyCount = 0;
                if (analysis.hasUppercase) varietyCount++;
                if (analysis.hasLowercase) varietyCount++;
                if (analysis.hasNumbers) varietyCount++;
                if (analysis.hasSymbols) varietyCount++;
                score += varietyCount * 10;
                
                // Security features (0-20 points)
                if (!analysis.isCommon) score += 10;
                if (!analysis.hasRepeatingChars) score += 5;
                if (!analysis.hasSequentialChars) score += 3;
                if (!analysis.hasKeyboardPatterns) score += 2;
                
                return Math.min(100, score);
            }

            hasSequentialChars(password) {
                const sequences = ['abc', 'bcd', 'cde', 'def', 'efg', 'fgh', 'ghi', 'hij', 'ijk', 'jkl', 'klm', 'lmn', 'mno', 'nop', 'opq', 'pqr', 'qrs', 'rst', 'stu', 'tuv', 'uvw', 'vwx', 'wxy', 'xyz'];
                const lowerPassword = password.toLowerCase();
                return sequences.some(seq => lowerPassword.includes(seq));
            }

            hasKeyboardPatterns(password) {
                const patterns = ['qwerty', 'asdf', 'zxcv', '1234', 'abcd'];
                const lowerPassword = password.toLowerCase();
                return patterns.some(pattern => lowerPassword.includes(pattern));
            }

            updateStrengthMeter(analysis) {
                const score = analysis.score;
                let strength = 'Very Weak';
                let color = '#dc3545';
                
                if (score >= 80) {
                    strength = 'Very Strong';
                    color = '#28a745';
                } else if (score >= 60) {
                    strength = 'Strong';
                    color = '#20c997';
                } else if (score >= 40) {
                    strength = 'Medium';
                    color = '#ffc107';
                } else if (score >= 20) {
                    strength = 'Weak';
                    color = '#fd7e14';
                }
                
                this.strengthText.textContent = strength;
                this.strengthScore.textContent = `${score}/100`;
                this.meterFill.style.width = `${score}%`;
                this.meterFill.style.background = color;
            }

            updateChecks(analysis) {
                this.updateLengthChecks(analysis);
                this.updateCharacterChecks(analysis);
                this.updateSecurityChecks(analysis);
                this.updateIssueChecks(analysis);
            }

            updateLengthChecks(analysis) {
                const checks = [
                    { text: 'At least 8 characters', pass: analysis.length >= 8 },
                    { text: 'At least 12 characters', pass: analysis.length >= 12 },
                    { text: 'At least 16 characters', pass: analysis.length >= 16 }
                ];
                this.renderChecks('lengthChecks', checks);
            }

            updateCharacterChecks(analysis) {
                const checks = [
                    { text: 'Contains uppercase letters', pass: analysis.hasUppercase },
                    { text: 'Contains lowercase letters', pass: analysis.hasLowercase },
                    { text: 'Contains numbers', pass: analysis.hasNumbers },
                    { text: 'Contains symbols', pass: analysis.hasSymbols }
                ];
                this.renderChecks('characterChecks', checks);
            }

            updateSecurityChecks(analysis) {
                const checks = [
                    { text: 'Not a common password', pass: !analysis.isCommon },
                    { text: 'No repeating characters', pass: !analysis.hasRepeatingChars },
                    { text: 'No sequential characters', pass: !analysis.hasSequentialChars },
                    { text: 'No keyboard patterns', pass: !analysis.hasKeyboardPatterns }
                ];
                this.renderChecks('securityChecks', checks);
            }

            updateIssueChecks(analysis) {
                const checks = [
                    { text: 'Contains spaces', pass: !analysis.hasSpaces, warning: true },
                    { text: 'Too short (< 8 chars)', pass: analysis.length >= 8 },
                    { text: 'Only one character type', pass: this.getCharacterTypeCount(analysis) > 1 },
                    { text: 'Common dictionary word', pass: !analysis.isCommon }
                ];
                this.renderChecks('issueChecks', checks);
            }

            getCharacterTypeCount(analysis) {
                let count = 0;
                if (analysis.hasUppercase) count++;
                if (analysis.hasLowercase) count++;
                if (analysis.hasNumbers) count++;
                if (analysis.hasSymbols) count++;
                return count;
            }

            renderChecks(containerId, checks) {
                const container = document.getElementById(containerId);
                container.innerHTML = '';
                
                checks.forEach(check => {
                    const li = document.createElement('li');
                    const icon = document.createElement('span');
                    icon.className = `check-icon ${check.pass ? 'pass' : (check.warning ? 'warning' : 'fail')}`;
                    icon.textContent = check.pass ? '‚úì' : (check.warning ? '!' : '‚úó');
                    
                    li.appendChild(icon);
                    li.appendChild(document.createTextNode(check.text));
                    container.appendChild(li);
                });
            }

            updateRecommendations(analysis) {
                const recommendations = [];
                
                if (analysis.length < 8) {
                    recommendations.push('Use at least 8 characters for better security');
                }
                if (analysis.length < 12) {
                    recommendations.push('Consider using 12+ characters for maximum security');
                }
                if (!analysis.hasUppercase) {
                    recommendations.push('Add uppercase letters to increase complexity');
                }
                if (!analysis.hasLowercase) {
                    recommendations.push('Add lowercase letters to increase complexity');
                }
                if (!analysis.hasNumbers) {
                    recommendations.push('Include numbers to strengthen your password');
                }
                if (!analysis.hasSymbols) {
                    recommendations.push('Add special characters (!@#$%^&*) for extra security');
                }
                if (analysis.isCommon) {
                    recommendations.push('Avoid common passwords - use something unique');
                }
                if (analysis.hasRepeatingChars) {
                    recommendations.push('Remove repeating characters (aaa, 111, etc.)');
                }
                if (analysis.hasSequentialChars) {
                    recommendations.push('Avoid sequential characters (abc, 123, etc.)');
                }
                if (analysis.hasKeyboardPatterns) {
                    recommendations.push('Avoid keyboard patterns (qwerty, asdf, etc.)');
                }
                if (analysis.hasSpaces) {
                    recommendations.push('Consider removing spaces for better compatibility');
                }
                
                if (recommendations.length > 0) {
                    this.recommendationList.innerHTML = '';
                    recommendations.forEach(rec => {
                        const li = document.createElement('li');
                        li.textContent = rec;
                        this.recommendationList.appendChild(li);
                    });
                    this.recommendations.style.display = 'block';
                } else {
                    this.recommendations.style.display = 'none';
                }
            }

            updateCrackTime(analysis) {
                const score = analysis.score;
                let timeToCrack = 'Instant';
                
                if (score >= 80) {
                    timeToCrack = 'Centuries';
                } else if (score >= 60) {
                    timeToCrack = 'Years';
                } else if (score >= 40) {
                    timeToCrack = 'Months';
                } else if (score >= 20) {
                    timeToCrack = 'Days';
                } else if (score >= 10) {
                    timeToCrack = 'Hours';
                } else {
                    timeToCrack = 'Minutes';
                }
                
                this.crackTimeValue.textContent = timeToCrack;
                this.crackTime.style.display = 'block';
            }

            resetAnalysis() {
                this.strengthText.textContent = 'Enter a password';
                this.strengthScore.textContent = '0/100';
                this.meterFill.style.width = '0%';
                this.meterFill.style.background = '#e9ecef';
                this.recommendations.style.display = 'none';
                this.crackTime.style.display = 'none';
                
                // Clear all check lists
                ['lengthChecks', 'characterChecks', 'securityChecks', 'issueChecks'].forEach(id => {
                    document.getElementById(id).innerHTML = '';
                });
            }

            showToast(message) {
                this.toast.textContent = message;
                this.toast.classList.add('show');
                setTimeout(() => {
                    this.toast.classList.remove('show');
                }, 2000);
            }
        }

        // Global functions
        function toggleVisibility() {
            const input = document.getElementById('passwordInput');
            const button = document.querySelector('.toggle-visibility');
            
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'üôà';
            } else {
                input.type = 'password';
                button.textContent = 'üëÅÔ∏è';
            }
        }

        function generateStrongPassword() {
            const length = 16;
            const charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=[]{}|;:,.<>?';
            let password = '';
            
            // Ensure at least one character from each category
            const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const lowercase = 'abcdefghijklmnopqrstuvwxyz';
            const numbers = '0123456789';
            const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';
            
            password += uppercase[Math.floor(Math.random() * uppercase.length)];
            password += lowercase[Math.floor(Math.random() * lowercase.length)];
            password += numbers[Math.floor(Math.random() * numbers.length)];
            password += symbols[Math.floor(Math.random() * symbols.length)];
            
            // Fill the rest randomly
            for (let i = 4; i < length; i++) {
                password += charset[Math.floor(Math.random() * charset.length)];
            }
            
            // Shuffle the password
            password = password.split('').sort(() => Math.random() - 0.5).join('');
            
            document.getElementById('passwordInput').value = password;
            generator.analyzePassword();
            generator.showToast('Strong password generated!');
        }

        function copyPassword() {
            const password = document.getElementById('passwordInput').value;
            if (password) {
                navigator.clipboard.writeText(password).then(() => {
                    generator.showToast('Password copied to clipboard!');
                });
            } else {
                generator.showToast('No password to copy!');
            }
        }

        function clearAnalysis() {
            document.getElementById('passwordInput').value = '';
            generator.resetAnalysis();
            generator.showToast('Analysis cleared!');
        }

        // Initialize the analyzer
        const generator = new PasswordAnalyzer();
    </script>
</body>
</html>
